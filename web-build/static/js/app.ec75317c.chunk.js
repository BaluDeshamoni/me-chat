(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{236:function(e,t,a){"use strict";a.d(t,"a",(function(){return D}));var n,r=a(0),c=a.n(r),o=(a(324),a(174)),i=a(341),l=a(2),u=a(16),s=a.n(u),m=a(85),d=a(4),p=a(33),f=a(78);a(313),a(314);n=0===f.a.apps.length?f.a.initializeApp({apiKey:"AIzaSyCnWVtEf_ZGN6c4Lt0yQH34eHArjiWGpak",authDomain:"signal-clone-7f371.firebaseapp.com",projectId:"signal-clone-7f371",storageBucket:"signal-clone-7f371.appspot.com",messagingSenderId:"296121707499",appId:"1:296121707499:web:22be0b3b33a861af6dc7ae"}):f.a.app();var h=f.a.auth(),g=n.firestore(),E=function(e){var t=e.navigation,a=Object(r.useState)(""),n=s()(a,2),o=n[0],i=n[1],l=Object(r.useState)(""),u=s()(l,2),f=u[0],g=u[1];Object(r.useEffect)((function(){return h.onAuthStateChanged((function(e){e&&t.replace("home"),console.log(e)}))}),[]);var E=function(){h.signInWithEmailAndPassword(o,f).catch((function(e){return alert(e.message)})),i(""),g("")};return c.a.createElement(m.a,{behavior:"padding",style:y.container},c.a.createElement(d.a,{style:y.inputcontainer},c.a.createElement(p.c,{placeholder:"Email",value:o,onChangeText:function(e){return i(e)},type:"Email"}),c.a.createElement(p.c,{placeholder:"Password",value:f,onSubmitEditing:E,secureTextEntry:!0,onChangeText:function(e){return g(e)},type:"password"})),c.a.createElement(p.b,{title:"Login",onPress:E,containerStyle:y.Button}),c.a.createElement(p.b,{title:"Register",type:"outline",onPress:function(){return t.navigate("register")},containerStyle:y.Button}),c.a.createElement(d.a,{style:{height:100}}))},y=l.a.create({container:{width:"100%",height:"100%",display:"flex"},inputcontainer:{},Button:{}}),b=function(){var e=Object(r.useState)(""),t=s()(e,2),a=t[0],n=t[1],o=Object(r.useState)(""),i=s()(o,2),l=i[0],u=i[1],f=Object(r.useState)(""),g=s()(f,2),E=g[0],y=g[1],b=Object(r.useState)(""),S=s()(b,2),x=S[0],O=S[1],w=function(){h.createUserWithEmailAndPassword(a,l).then((function(e){e.user.updateProfile({displayName:E,photoURL:x})})).catch((function(e){return alert(e.message)}))};return c.a.createElement(m.a,{behavior:"padding",style:v.container},c.a.createElement(d.a,{style:v.inputcontainer},c.a.createElement(p.c,{placeholder:"Username",value:E,onChangeText:function(e){return y(e)},type:"username"}),c.a.createElement(p.c,{placeholder:"Email",value:a,onChangeText:function(e){return n(e)},type:"email"}),c.a.createElement(p.c,{placeholder:"Password",value:l,secureTextEntry:!0,onChangeText:function(e){return u(e)},type:"password"}),c.a.createElement(p.c,{placeholder:"Avatar-Drop link here",value:x,onChangeText:function(e){return O(e)},onSubmitEditing:w,type:"avatar"})),c.a.createElement(p.b,{title:"Register",onPress:w,containerStyle:v.Button}),c.a.createElement(d.a,{style:{height:100}}))},v=l.a.create({container:{},inputcontainer:{},button:{}}),S=a(51),x=function(e){var t,a,n,o=e.id,i=e.chatName,l=e.enterChat,u=Object(r.useState)([]),m=s()(u,2),d=m[0],f=m[1];return Object(r.useEffect)((function(){return g.collection("chats").doc(o).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){return f(e.docs.map((function(e){return e.data()})))}))})),c.a.createElement(p.d,{key:o,onPress:function(){return l(o,i)},bottomDivider:!0},c.a.createElement(p.a,{rounded:!0,source:{uri:null==(t=d[0])?void 0:t.photoURL}}),c.a.createElement(p.d.Content,null,c.a.createElement(p.d.Title,null,i),c.a.createElement(p.d.Subtitle,{style:{color:"grey"}},null==(a=d[0])?void 0:a.displayname," : ",null==d||null==(n=d[0])?void 0:n.message)))},O=(l.a.create({}),a(222)),w=a(84),C=a(25),j=function(e){var t=e.navigation,a=function(){h.signOut().then((function(){t.replace("login")})).catch((function(e){return alert(e.message)}))},n=Object(r.useState)([]),o=s()(n,2),i=o[0],l=o[1];Object(r.useEffect)((function(){return g.collection("chats").onSnapshot((function(e){return l(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),Object(r.useLayoutEffect)((function(){t.setOptions({title:"Signal",headerLeft:function(){var e;return c.a.createElement(d.a,{style:{marginLeft:20}},c.a.createElement(C.a,{onPress:a,activeOpacity:.5},c.a.createElement(p.a,{rounded:!0,source:{uri:null==h||null==(e=h.currentUser)?void 0:e.photoURL}})))},headerRight:function(){return c.a.createElement(d.a,{style:{width:60}},c.a.createElement(C.a,{onPress:function(){return t.navigate("chatroom")},activeOpacity:.5},c.a.createElement(O.a,{name:"pencil",size:24,color:"black"})))}})}),[]);var u=function(e,a){t.navigate("chat",{id:e,chatName:a})};return c.a.createElement(w.a,null,c.a.createElement(S.a,null,i.map((function(e){var t=e.id,a=e.data.chatName;return c.a.createElement(x,{key:t,id:t,chatName:a,enterChat:u})}))))},k=(l.a.create({}),a(22)),L=a.n(k),T=function(e){var t=e.navigation,a=Object(r.useState)(""),n=s()(a,2),o=n[0],i=n[1];return c.a.createElement(d.a,null,c.a.createElement(p.c,{placeholder:"Enter chat name",type:"text",value:o,onChangeText:function(e){return i(e)}}),c.a.createElement(p.b,{onPress:function(){return L.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.awrap(g.collection("chats").add({chatName:o}).then((function(){return t.goBack()})).catch((function(e){return alert(e)})));case 2:case"end":return e.stop()}}),null,null,null,Promise)},title:"Add"}))},R=(l.a.create({}),a(26)),P=a(227),U=a(209),N=a(8),B=a(58),W=a(65),z=function(e){var t=e.navigation,a=e.route,n=Object(r.useState)(""),o=s()(n,2),i=o[0],l=o[1],u=Object(r.useState)([]),E=s()(u,2),y=E[0],b=E[1];Object(r.useLayoutEffect)((function(){return g.collection("chats").doc(a.params.id).collection("messages").orderBy("timestamp","asc").onSnapshot((function(e){return b(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[a]),Object(r.useLayoutEffect)((function(){t.setOptions({title:"chat",headerTitle:function(){var e;return c.a.createElement(d.a,{style:{flexDirection:"row",alignItems:"center"}},c.a.createElement(p.a,{rounded:!0,source:{uri:null==(e=y[0])?void 0:e.data.photoURL}}),c.a.createElement(R.a,{style:{marginLeft:15,fontWeight:"700"}},a.params.chatName))},headerLeft:function(){return c.a.createElement(C.a,{activeOpacity:.5,onPress:function(){t.goBack()}},c.a.createElement(P.a,{name:"arrowleft",size:24,color:"blue"}))}})}),[t,y]);var v=function(){W.a.dismiss(),g.collection("chats").doc(a.params.id).collection("messages").add({timestamp:f.a.firestore.FieldValue.serverTimestamp(),message:i,displayname:h.currentUser.displayName,email:h.currentUser.email,photoURL:h.currentUser.photoURL}),l("")};return c.a.createElement(w.a,{style:{flex:1,backgroundColor:"white"}},c.a.createElement(m.a,{behavior:"ios"===N.a.OS?"padding":"height",style:A.container,keyboardVerticalOffset:90},c.a.createElement(c.a.Fragment,null,c.a.createElement(S.a,{contentContainerStyle:{paddingTop:10}},y.map((function(e){var t=e.id,a=e.data;return a.email===h.currentUser.email?c.a.createElement(d.a,{key:t,style:A.sender},c.a.createElement(p.a,{rounded:!0,size:30,containerStyle:{position:"absolute",bottom:-15,right:-5},source:{uri:a.photoURL}}),c.a.createElement(R.a,{style:A.senderText},a.message)):c.a.createElement(d.a,{key:t,style:A.receiver},c.a.createElement(p.a,{rounded:!0,size:30,containerStyle:{position:"absolute",bottom:-15,left:-5},source:{uri:a.photoURL}}),c.a.createElement(R.a,{style:A.receiverText},a.message),c.a.createElement(R.a,{style:A.receiverName},a.displayname))}))),c.a.createElement(d.a,{style:A.footer},c.a.createElement(B.a,{value:i,placeholder:"send message",onChangeText:function(e){return l(e)},style:A.inputField,onSubmitEditing:v}),c.a.createElement(C.a,{onPress:v,activeOpacity:.5},c.a.createElement(U.a,{name:"send",size:24,color:"blue"}))))))},A=l.a.create({container:{flex:1},sender:{maxWidth:"80%",alignSelf:"flex-end",padding:15,marginRight:15,marginBottom:20,backgroundColor:"#ECECEC",borderRadius:20,position:"relative"},receiver:{maxWidth:"80%",alignSelf:"flex-start",padding:15,marginLeft:15,marginBottom:20,backgroundColor:"blue",borderRadius:20,position:"relative"},receiverText:{color:"white",fontWeight:"500",marginLeft:5},senderText:{color:"black",fontWeight:"500",marginRight:5},receiverName:{color:"black",fontSize:14,position:"absolute",bottom:-15,fontWeight:"400",left:25},footer:{flexDirection:"row",alignItems:"center",width:"100%",padding:15},inputField:{bottom:0,height:40,flex:1,backgroundColor:"lightcyan",color:"blue",padding:10,borderRadius:30,marginRight:10}}),I=Object(i.a)();function D(){return c.a.createElement(d.a,{style:"web"===N.a.OS&&F.container},c.a.createElement(o.a,null,c.a.createElement(I.Navigator,null,c.a.createElement(I.Screen,{name:"login",component:E}),c.a.createElement(I.Screen,{name:"register",component:b}),c.a.createElement(I.Screen,{name:"home",component:j}),c.a.createElement(I.Screen,{name:"chatroom",component:T}),c.a.createElement(I.Screen,{name:"chat",component:z}))))}var F=l.a.create({container:{width:"50vh",height:"90vh",alignSelf:"center",marginVertical:"30px"}})},249:function(e,t,a){e.exports=a(325)}},[[249,1,2]]]);
//# sourceMappingURL=app.ec75317c.chunk.js.map